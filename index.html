<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Free AI-Generated Conversion Report - Pimento</title>
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap");

      :root {
        --brand: #4caf50;
        --brand2: #4caf50;
        --text: #111827;
        --muted: #e5e7eb;
        --gt-dark: #1f2937; /* approximate dark navy */
        --gt-blue: #3b82f6; /* blue for progress */
        --gt-light: #e5e7eb; /* light for progress bg */
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
        background: #fff;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        position: relative;
        overflow: hidden;
      }

      /* Floating geometric shapes */
      .shape {
        position: fixed;
        border: 2px solid var(--brand);
        animation: shapeFloat 20s infinite linear;
        z-index: 2;
      }
      .shape-1 {
        width: 100px;
        height: 100px;
        top: 10%;
        left: 5%;
        animation-duration: 15s;
        transform: rotate(45deg);
      }
      .shape-2 {
        width: 60px;
        height: 60px;
        bottom: 20%;
        right: 10%;
        border-radius: 50%;
        animation-duration: 20s;
        animation-direction: reverse;
      }
      .shape-3 {
        width: 80px;
        height: 80px;
        top: 50%;
        right: 5%;
        transform: rotate(30deg);
        animation-duration: 25s;
      }
      @keyframes shapeFloat {
        0% {
          transform: rotate(0) translateY(0);
        }
        33% {
          transform: rotate(120deg) translateY(-20px);
        }
        66% {
          transform: rotate(240deg) translateY(20px);
        }
        100% {
          transform: rotate(360deg) translateY(0);
        }
      }

      /* Neon lines */
      .neon-line {
        position: fixed;
        height: 1px;
        background: linear-gradient(
          90deg,
          transparent,
          rgb(0, 255, 21),
          transparent
        );
        box-shadow: 0 0 10px white;
        opacity: 0.5;
        z-index: 3;
      }
      .neon-line-1 {
        width: 300px;
        top: 30%;
        left: -300px;
        animation: neonSlide 6s linear infinite;
      }
      .neon-line-2 {
        width: 200px;
        bottom: 40%;
        right: -200px;
        animation: neonSlideReverse 8s linear infinite;
      }
      @keyframes neonSlide {
        to {
          transform: translateX(calc(100vw + 600px));
        }
      }
      @keyframes neonSlideReverse {
        to {
          transform: translateX(calc(-100vw - 400px));
        }
      }

      /* Page transition overlay */
      .transition-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #fff;
        z-index: 1000;
        display: none;
        pointer-events: none;
      }
      .transition-overlay.active {
        display: block;
        pointer-events: all;
      }
      .liquid-transition {
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      @keyframes liquidExpand {
        0% {
          transform: scale(0);
          opacity: 1;
        }
        60% {
          transform: scale(30);
          opacity: 0.8;
        }
        100% {
          transform: scale(50);
          opacity: 0;
        }
      }
      .transition-loader {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        opacity: 0;
      }
      .transition-loader.show {
        animation: loaderFade 1.5s ease-in-out;
      }
      @keyframes loaderFade {
        0%,
        100% {
          opacity: 0;
        }
        50% {
          opacity: 1;
        }
      }
      .loader-ring {
        width: 60px;
        height: 60px;
        border: 3px solid rgba(171, 255, 0, 0.2);
        border-top-color: var(--brand2);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .container {
        max-width: 600px;
        width: 100%;
        position: relative;
        z-index: 10;
        perspective: 2000px;
      }

      /* Card */
      .form-card {
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 30px;
        padding: 60px;
        position: relative;
        transform-style: preserve-3d;
        animation: cardFloat 6s ease-in-out infinite,
          cardEntrance 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        box-shadow: 0 8px 32px rgba(171, 255, 0, 0.1),
          0 8px 32px rgba(0, 0, 0, 0.2), inset 0 1px 0 rgba(255, 255, 255, 0.1),
          inset 0 1px 0 rgba(0, 255, 0, 0.1), inset 0 -1px 0 rgba(0, 0, 0, 0.1),
          inset 0 -2px 4px rgba(0, 0, 0, 0.2),
          inset 0 -2px 4px rgba(0, 0, 0, 0.1);
      }
      @keyframes cardFloat {
        0%,
        100% {
          transform: translateY(0);
        }
        25% {
          transform: translateY(-10px);
        }
        75% {
          transform: translateY(5px);
        }
      }
      @keyframes cardEntrance {
        0% {
          opacity: 0;
          transform: scale(0.5) rotateY(90deg);
        }
        100% {
          opacity: 1;
          transform: scale(1) rotateY(0);
        }
      }

      /* Steps */
      .step {
        display: none;
        animation: stepFadeIn 0.5s ease-out;
      }
      .step.active {
        display: block;
      }
      @keyframes stepFadeIn {
        from {
          opacity: 0;
          transform: translateX(30px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      /* Dots (2–5) */
      .progress-container {
        position: absolute;
        top: -50px;
        left: 50%;
        transform: translateX(-50%);
        display: none;
        gap: 30px;
        align-items: center;
      }
      .progress-step {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.1);
        border: 2px solid rgba(255, 255, 255, 0.2);
        position: relative;
        transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }
      .progress-step.active {
        background: var(--brand);
        border-color: var(--brand);
        box-shadow: 0 0 30px var(--brand),
          inset 0 0 10px rgba(255, 255, 255, 0.5);
        animation: stepPulse 1.5s ease-in-out infinite;
      }
      @keyframes stepPulse {
        0%,
        100% {
          transform: scale(1);
          box-shadow: 0 0 30px var(--brand),
            inset 0 0 10px rgba(255, 255, 255, 0.5);
        }
        50% {
          transform: scale(1.3);
          box-shadow: 0 0 50px var(--brand),
            inset 0 0 20px rgba(255, 255, 255, 0.7);
        }
      }
      .progress-step.completed {
        background: var(--brand);
        border-color: var(--brand);
      }
      .progress-step::after {
        content: "";
        position: absolute;
        width: 30px;
        height: 2px;
        background: rgba(255, 255, 255, 0.1);
        left: 20px;
        top: 50%;
        transform: translateY(-50%);
      }
      .progress-step:last-child::after {
        display: none;
      }
      .progress-step.active::after {
        background: linear-gradient(90deg, var(--brand), transparent);
      }

      /* Top progress (from step 1) */
      .top-progress {
        display: block;
        margin-bottom: 24px;
      }
      .top-progress .progress-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 8px;
        font-weight: 700;
        color: #000;
        font-size: 13px;
      }
      .progress-bar {
        width: 100%;
        height: 8px;
        background: rgba(0, 0, 0, 0.1);
        border-radius: 999px;
        overflow: hidden;
      }
      .progress-fill {
        height: 100%;
        background: var(--brand);
        width: 0;
        transition: width 0.3s ease;
      }

      /* Typography */
      .brand-tagline {
        text-align: center;
        font-size: 11px;
        color: #000;
        letter-spacing: 2px;
        text-transform: uppercase;
        font-weight: 700;
        margin-bottom: 20px;
        opacity: 0;
        animation: fadeIn 0.8s ease-out 0.5s forwards;
      }
      @keyframes fadeIn {
        to {
          opacity: 1;
        }
      }
      h1 {
        font-size: 42px;
        font-weight: 900;
        line-height: 1.1;
        text-align: center;
        margin-bottom: 20px;
        position: relative;
      }
      .text-white {
        color: #000;
        display: block;
        opacity: 0;
        animation: wordSlide 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) 0.8s
          forwards;
      }
      .text-green {
        color: var(--brand);
        display: block;
        font-size: 48px;
        opacity: 0;
        animation: wordSlide 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) 1s
          forwards;
      }
      @keyframes wordSlide {
        from {
          opacity: 0;
          transform: translateX(-30px) rotateY(-30deg);
        }
        to {
          opacity: 1;
          transform: translateX(0) rotateY(0);
        }
      }
      h2 {
        font-size: 32px;
        font-weight: 700;
        color: #2b2a2a;
        margin-bottom: 20px;
        text-align: center;
      }
      .description {
        font-size: 16px;
        line-height: 1.8;
        color: #000;
        text-align: center;
        margin-bottom: 30px;
        max-width: 450px;
        margin-left: auto;
        margin-right: auto;
        opacity: 0;
        animation: fadeInUp 0.8s ease-out 1.2s forwards;
      }
      @keyframes fadeInUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
        from {
          opacity: 0;
          transform: translateY(30px);
        }
      }
      .description strong {
        color: var(--brand);
        font-weight: 700;
      }

      /* Challenge cards */
      .challenge-grid {
        display: grid;
        gap: 16px;
        margin-bottom: 8px;
      }
      .challenge-card {
        background: rgba(255, 255, 255, 0.05);
        border: 2px solid rgba(0, 0, 0, 0.1);
        border-radius: 12px;
        padding: 20px;
        color: rgba(0, 0, 0, 0.9);
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        text-align: center;
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }
      .challenge-card:hover {
        background: rgba(171, 255, 0, 0.1);
        border-color: var(--brand);
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(171, 255, 0, 0.2);
      }
      .challenge-card.selected {
        background: rgba(171, 255, 0, 0.2);
        border-color: var(--brand);
        color: var(--brand);
      }

      /* Form elements */
      .form-group {
        margin-bottom: 16px;
      }
      label {
        display: block;
        color: rgba(0, 0, 0, 0.9);
        font-size: 14px;
        font-weight: 600;
        margin-bottom: 8px;
      }
      input[type="text"],
      input[type="number"],
      input[type="email"],
      input[type="url"],
      select {
        width: 100%;
        padding: 16px;
        background: rgba(0, 0, 0, 0.05);
        border: 1px solid rgba(0, 0, 0, 0.2);
        border-radius: 12px;
        color: #000;
        font-size: 16px;
        transition: all 0.3s ease;
      }
      input:focus,
      select:focus {
        outline: none;
        border-color: var(--brand);
        background: rgba(0, 0, 0, 0.08);
        box-shadow: 0 0 20px rgba(171, 255, 0, 0.2);
      }
      input::placeholder {
        color: rgba(0, 0, 0, 0.4);
      }

      /* Validation */
      .input-error {
        border-color: #ef4444 !important;
        background: rgba(239, 68, 68, 0.06) !important;
      }
      .error-text {
        font-size: 12px;
        color: #ef4444;
        margin-top: 6px;
      }
      .error-banner {
        font-size: 13px;
        color: #ef4444;
        margin-top: 8px;
        text-align: center;
      }

      /* Buttons */
      .cta-button {
        width: 100%;
        padding: 20px;
        background: linear-gradient(135deg, var(--brand) 0%, var(--brand) 100%);
        color: #000;
        border: none;
        border-radius: 15px;
        font-size: 16px;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        opacity: 0;
        animation: buttonSlideUp 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275)
          1.4s forwards;
        box-shadow: 0 10px 40px rgba(88, 88, 87, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.3);
        background-color: #000;
        color: #fff;
      }
      @keyframes buttonSlideUp {
        from {
          opacity: 0;
          transform: translateY(50px) scale(0.9);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      .cta-button::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        transition: left 0.5s ease;
      }
      .cta-button:hover::before {
        left: 100%;
      }
      .cta-button:hover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 20px 60px rgba(171, 255, 0, 0.5),
          inset 0 1px 0 rgba(255, 255, 255, 0.5);
      }

      /* Back button */
      .back-button {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 14px;
        border-radius: 10px;
        border: 1px solid rgba(0, 0, 0, 0.15);
        background: rgba(0, 0, 0, 0.04);
        color: #000;
        font-size: 14px;
        font-weight: 600;
        cursor: pointer;
        margin-bottom: 16px;
        transition: all 0.2s ease;
      }
      .back-button:hover {
        background: rgba(171, 255, 0, 0.15);
        border-color: var(--brand);
        color: var(--brand);
        transform: translateY(-1px);
      }

      /* Report slider */
      .report-slider {
        background: rgba(0, 0, 0, 0.05);
        border-radius: 16px;
        padding: 30px;
        margin: 30px 0;
        height: 180px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        overflow: hidden;
        border: 9px solid rgba(0, 0, 0, 0);
      }
      .slide-content {
        text-align: center;
        color: #000;
        animation: slideIn 0.5s ease-out;
      }
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(50px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
      .slide-title {
        font-size: 22px;
        font-weight: 700;
        color: var(--brand);
        margin-bottom: 12px;
      }
      .slide-desc {
        font-size: 14px;
        line-height: 1.6;
        color: rgba(0, 0, 0, 0.7);
      }

      /* Footer text */
      .footer-text {
        text-align: center;
        padding: 16px;
        margin: 20px 0;
        color: rgba(0, 0, 0, 0.6);
        font-size: 13px;
      }
      .footer-text strong {
        color: var(--brand);
      }

      /* Urgency */
      .urgency-box {
        margin-top: 20px;
        text-align: center;
        opacity: 0;
        animation: urgencyPop 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) 1.6s
          forwards;
      }
      @keyframes urgencyPop {
        from {
          opacity: 0;
          transform: scale(0);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }
      .urgency-content {
        display: inline-flex;
        align-items: center;
        gap: 10px;
        padding: 10px 20px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid #000;
        border-radius: 100px;
        color: #000;
        font-size: 13px;
        font-weight: 600;
      }
      .live-indicator {
        width: 8px;
        height: 8px;
        background: #000;
        border-radius: 50%;
        box-shadow: 0 0 10px var(--brand);
        animation: livePulse 1.5s ease-in-out infinite;
      }
      @keyframes livePulse {
        0%,
        100% {
          transform: scale(1);
          box-shadow: 0 0 10px var(--brand);
        }
        50% {
          transform: scale(1.2);
          box-shadow: 0 0 20px var(--brand);
        }
      }

      /* Warning box */
      .warning-box {
        background: rgba(239, 68, 68, 0.1);
        border: 1px solid rgba(239, 68, 68, 0.3);
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 16px;
        color: rgba(0, 0, 0, 0.8);
        font-size: 13px;
        text-align: center;
      }

      /* ANALYSIS (Step 6) – GTMetrix-like Scanning */
      .analysis-wrap {
        max-width: 520px;
        margin: 0 auto;
        text-align: center;
      }
      .analysis-title {
        font-size: 28px;
        font-weight: 900;
        margin: 18px 0 10px;
        color: #3b82f6; /* blue like in GTMetrix */
      }
      .analyzing-url {
        font-size: 18px;
        color: #6b7280;
        margin-bottom: 20px;
      }
      .gt-browser-window {
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        position: relative;
        height: 300px;
        width: 100%;
        max-width: 500px;
        margin: 20px auto;
        border: 1px solid #e5e7eb;
      }
      .browser-header {
        background: #f3f4f6;
        padding: 8px 12px;
        display: flex;
        align-items: center;
        border-bottom: 1px solid #e5e7eb;
      }
      .browser-controls {
        display: flex;
        gap: 6px;
        margin-right: 12px;
      }
      .browser-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
      }
      .browser-dot.red {
        background: #ef4444;
      }
      .browser-dot.yellow {
        background: #f59e0b;
      }
      .browser-dot.green {
        background: #10b981;
      }
      .browser-url-bar {
        flex: 1;
        background: #fff;
        border-radius: 4px;
        padding: 6px 10px;
        font-size: 12px;
        color: #374151;
        border: 1px solid #d1d5db;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }
      .browser-content {
        position: relative;
        height: calc(100% - 34px); /* Adjust for header height */
        background: #fff;
        overflow: hidden;
      }
      .scan-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent 0%,
          rgba(76, 175, 80, 0.3) 50%,
          transparent 100%
        );
        transform: translateX(-100%);
        animation: scan 2s linear infinite;
        z-index: 1;
      }
      @keyframes scan {
        0% {
          transform: translateX(-100%);
        }
        100% {
          transform: translateX(100%);
        }
      }
      .mock-content {
        padding: 20px;
        filter: blur(2px); /* Simulate content being analyzed */
        height: 100%;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .mock-image {
        width: 100%;
        height: 120px;
        background: #e5e7eb;
        border-radius: 4px;
      }
      .mock-text {
        width: 100%;
        height: 20px;
        background: #e5e7eb;
        border-radius: 4px;
      }
      .mock-text.short {
        width: 60%;
      }
      .analysis-meta {
        margin-top: 10px;
        display: flex;
        justify-content: center;
        gap: 10px;
        flex-wrap: wrap;
      }
      .meta-chip {
        font-size: 12px;
        font-weight: 700;
        color: #000;
        background: rgba(0, 0, 0, 0.05);
        border: 1px solid rgba(0, 0, 0, 0.08);
        padding: 6px 10px;
        border-radius: 999px;
      }
      .meta-chip strong {
        color: var(--brand);
      }
      .analysis-note {
        font-size: 12px;
        color: rgba(0, 0, 0, 0.55);
        margin-top: 6px;
      }

      /* Timeline list */
      .analysis-list {
        list-style: none;
        margin-top: 18px;
        display: grid;
        gap: 12px;
        position: relative;
        padding-left: 6px;
      }
      .analysis-list::before {
        content: "";
        position: absolute;
        left: 19px;
        top: 0;
        bottom: 0;
        width: 2px;
        background: linear-gradient(var(--brand), var(--brand2));
        opacity: 0.25;
        border-radius: 2px;
      }
      .analysis-item {
        position: relative;
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 14px;
        border-radius: 12px;
        background: #fff;
        border: 1px solid rgba(0, 0, 0, 0.06);
      }
      .status-icon {
        flex: 0 0 18px;
        width: 18px;
        height: 18px;
        border-radius: 50%;
        border: 2px solid #cbd5e1;
        position: relative;
        display: grid;
        place-items: center;
        color: #fff;
        font-size: 12px;
        font-weight: 800;
        background: #fff;
        z-index: 1;
      }
      .analysis-item.pending {
        opacity: 0.55;
      }
      .analysis-item.active {
        background: rgba(76, 175, 80, 0.08);
        border: 1px solid rgba(76, 175, 80, 0.25);
        box-shadow: 0 4px 16px rgba(171, 255, 0, 0.12);
      }
      .analysis-item.active .status-icon {
        border-color: var(--brand);
      }
      .analysis-item.active .status-icon::after {
        content: "";
        width: 8px;
        height: 8px;
        background: var(--brand);
        border-radius: 50%;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }
      .analysis-item.done .status-icon {
        background: var(--brand);
        border-color: var(--brand);
      }
      .analysis-item.done .status-icon::after {
        content: "✓";
        font-size: 12px;
        color: #fff;
        transform: none;
        width: auto;
        height: auto;
        background: transparent;
      }
      .analysis-item.done .analysis-text {
        color: var(--brand);
        font-weight: 700;
      }
      .analysis-text {
        text-align: left;
        color: var(--text);
        font-weight: 600;
        font-size: 14px;
      }

      /* Screenshot in Step 7 */
      .screenshot-wrap {
        max-width: 500px;
        margin: 20px auto;
        text-align: center;
      }
      .screenshot-title {
        font-size: 20px;
        font-weight: 700;
        color: var(--brand);
        margin-bottom: 10px;
      }
      .screenshot-url {
        font-size: 14px;
        color: #6b7280;
        margin-bottom: 10px;
      }
      .screenshot-browser {
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        position: relative;
        height: 300px;
        width: 100%;
        max-width: 500px;
        margin: 0 auto;
        border: 1px solid #e5e7eb;
      }
      .screenshot-content {
        height: calc(100% - 34px);
        background: #e5e7eb;
        filter: blur(2px);
        display: flex;
        flex-direction: column;
        gap: 10px;
        padding: 20px;
      }

      /* Results */
      .results-card {
        background: rgba(171, 255, 0, 0.05);
        border: 1px solid rgb(0, 0, 0);
        border-radius: 16px;
        padding: 24px;
        margin-bottom: 24px;
        color: #000;
      }
      .metric-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 30px;
      }
      .metric-box {
        text-align: center;
      }
      .metric-value {
        font-size: 32px;
        font-weight: 900;
        color: var(--brand);
      }
      .metric-label {
        font-size: 12px;
        color: rgba(0, 0, 0, 0.6);
        text-transform: uppercase;
        margin-top: 8px;
      }
      .issue-item {
        background: rgba(0, 0, 0, 0.03);
        border-left: 3px solid var(--brand);
        padding: 16px;
        margin-bottom: 12px;
        border-radius: 8px;
        color: rgba(0, 0, 0, 0.8);
        filter: blur(2px);
        user-select: none;
      }
      .priority-high {
        border-left-color: #ef4444;
      }
      .priority-medium {
        border-left-color: #f59e0b;
      }
      .priority-low {
        border-left-color: #10b981;
      }
      .competitor-item {
        display: flex;
        justify-content: space-between;
        padding: 12px;
        background: rgba(0, 0, 0, 0.03);
        border-radius: 8px;
        margin-bottom: 12px;
        color: rgba(0, 0, 0, 0.8);
      }

      .score-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 16px;
        margin-top: 20px;
      }
      .score-item {
        background: rgba(0, 0, 0, 0.05);
        border-radius: 12px;
        padding: 16px;
        text-align: center;
      }
      .score-value {
        font-size: 24px;
        font-weight: 700;
        color: var(--brand);
      }
      .score-label {
        font-size: 12px;
        color: rgba(0, 0, 0, 0.6);
        margin-top: 4px;
      }

      /* Booking */
      .booking-section {
        text-align: center;
      }
      .value-list {
        background: rgba(0, 0, 0, 0.05);
        border-radius: 12px;
        padding: 20px;
        margin: 20px 0;
        text-align: left;
      }
      .value-item {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 16px;
        color: rgba(0, 0, 0, 0.9);
      }
      .value-item:last-child {
        margin-bottom: 0;
      }
      .check-icon {
        color: var(--brand);
        font-size: 20px;
      }
      .urgency-badge {
        display: inline-block;
        background: rgba(239, 68, 68, 0.2);
        border: 1px solid #000;
        color: #000;
        padding: 8px 16px;
        border-radius: 100px;
        font-size: 14px;
        font-weight: 600;
        margin: 20px 0;
      }

      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
      }

      @media (max-width: 640px) {
        .form-card {
          padding: 40px 30px;
        }
        h1 {
          font-size: 32px;
        }
        .text-green {
          font-size: 38px;
        }
        .metric-grid {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <!-- Page transition overlay -->
    <div class="transition-overlay" id="transitionOverlay">
      <div class="liquid-transition">
        <div class="liquid-circle" id="liquidCircle"></div>
      </div>
      <div class="transition-loader" id="transitionLoader">
        <div class="loader-ring"></div>
      </div>
    </div>

    <!-- Background bits -->
    <div class="grid-bg"></div>
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
    <div class="neon-line neon-line-1"></div>
    <div class="neon-line neon-line-2"></div>

    <div class="container">
      <div class="form-card" id="formCard">
        <!-- Dots (2–5) -->
        <div
          class="progress-container"
          id="progressContainer"
          style="display: none"
        >
          <div class="progress-step" data-step="1"></div>
          <div class="progress-step" data-step="2"></div>
          <div class="progress-step" data-step="3"></div>
          <div class="progress-step" data-step="4"></div>
        </div>

        <!-- Top progress (from Step 1) -->
        <div class="top-progress" id="topProgress">
          <div class="progress-header">
            <span
              >Step <span id="currentStepText">1</span> of
              <span id="totalStepsText">8</span></span
            >
            <span id="progressPercent">0%</span>
          </div>
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
          </div>
        </div>

        <!-- Step 1 -->
        <div class="step active" id="step1">
          <div class="brand-tagline">
            FOR SHOPIFY BRANDS DOING OVER $50K A MONTH
          </div>
          <h1>
            <span class="text-white">FREE AI-GENERATED</span
            ><span class="text-green">CONVERSION REPORT</span>
          </h1>
          <p class="description">
            Claim your AI Conversion Report mapping all growth opportunities on
            your Shopify Store with exclusive focus on how you can convert your
            traffic into dollars.
          </p>
          <button class="cta-button">Start Free Audit Now →</button>
          <div class="urgency-box">
            <div class="urgency-content">
              <div class="live-indicator"></div>
              <span>Only 7 free audits remaining today</span>
            </div>
          </div>
          <div class="report-slider">
            <div class="slide-content" id="slideContent"></div>
          </div>
        </div>

        <!-- Step 2 -->
        <div class="step" id="step2">
          <h2>Got it! What are you struggling with?</h2>
          <div class="challenge-grid" id="challengeGrid">
            <div
              class="challenge-card"
              onclick="selectChallenge(this,'low-conversion')"
            >
              Low conversion rate
            </div>
            <div
              class="challenge-card"
              onclick="selectChallenge(this,'low-aov')"
            >
              Low Average Order Value
            </div>
            <div
              class="challenge-card"
              onclick="selectChallenge(this,'low-subscription')"
            >
              Low Subscription rate
            </div>
          </div>
          <div class="error-banner" id="challengeError" style="display: none">
            Please select a challenge to continue.
          </div>
          <div class="footer-text">
            <strong>We've audited +1,000 Shopify Stores</strong> using AI.
          </div>
          <button class="cta-button">Continue →</button>
        </div>

        <!-- Step 3 -->
        <div class="step" id="step3">
          <h2>Let's get started with your numbers!</h2>
          <div class="form-group">
            <label>Monthly revenue ($)</label>
            <input
              type="number"
              id="monthlyRevenue"
              placeholder="Total revenue per month"
              required
              min="0"
              step="any"
            />
            <div
              class="error-text"
              id="err-monthlyRevenue"
              style="display: none"
            ></div>
          </div>
          <div class="form-group">
            <label>Monthly ad spend ($)</label>
            <input
              type="number"
              id="monthlyAdSpend"
              placeholder="Total ad spend on all channels"
              required
              min="0"
              step="any"
            />
            <div
              class="error-text"
              id="err-monthlyAdSpend"
              style="display: none"
            ></div>
          </div>
          <div class="footer-text" style="color: #f59e0b">
            The audit will not work if you do not submit real numbers.
          </div>
          <button class="cta-button">Continue →</button>
        </div>

        <!-- Step 4 -->
        <div class="step" id="step4">
          <h2>Perfect! Now add your Shopify metrics</h2>
          <div class="form-group">
            <label>Conversion rate (%)</label>
            <input
              type="number"
              id="conversionRate"
              step="0.01"
              placeholder="Percentage of visitors who make a purchase"
              required
              min="0"
              max="100"
            />
            <div
              class="error-text"
              id="err-conversionRate"
              style="display: none"
            ></div>
          </div>
          <div class="form-group">
            <label>Average order value ($)</label>
            <input
              type="number"
              id="aov"
              placeholder="Average $ amount per order"
              required
              min="0.01"
              step="any"
            />
            <div class="error-text" id="err-aov" style="display: none"></div>
          </div>
          <div class="form-group">
            <label>Subscription rate (%)</label>
            <input
              type="number"
              id="subscriptionRate"
              step="0.01"
              placeholder="For subscription brands"
              required
              min="0"
              max="100"
            />
            <div
              class="error-text"
              id="err-subscriptionRate"
              style="display: none"
            ></div>
          </div>
          <div class="footer-text">
            <strong>We've audited +1,000 Shopify Stores</strong> using AI.
          </div>
          <button class="cta-button">Continue →</button>
        </div>

        <!-- Step 5 -->
        <div class="step" id="step5">
          <h2>Let's fix that! You're almost done.</h2>
          <p class="description">
            Add a valuable URL (best-selling product page) for the most valuable
            insights.
          </p>
          <div class="warning-box">
            ⚠️ Audit will not work if fake numbers are used.
          </div>
          <div class="form-group">
            <label>Website URL</label>
            <input
              type="url"
              id="websiteUrl"
              placeholder="https://yourstore.com"
              required
            />
            <div
              class="error-text"
              id="err-websiteUrl"
              style="display: none"
            ></div>
          </div>
          <div class="form-group">
            <label>Type of page</label>
            <select id="pageType" required>
              <option value="">Select page type</option>
              <option value="pdf">PDF</option>
              <option value="lander">Lander</option>
              <option value="collection">Collection page</option>
              <option value="product">Product page</option>
              <option value="other">Other</option>
            </select>
            <div
              class="error-text"
              id="err-pageType"
              style="display: none"
            ></div>
          </div>
          <div class="form-group">
            <label>Industry</label>
            <select id="industry" required>
              <option value="">Select Industry</option>
              <option value="fashion">Fashion & Apparel</option>
              <option value="health">Health & Beauty</option>
              <option value="home">Home & Garden</option>
              <option value="electronics">Electronics</option>
              <option value="food">Food & Beverage</option>
              <option value="jewelry">Jewelry & Accessories</option>
              <option value="sports">Sports & Recreation</option>
              <option value="other">Other</option>
            </select>
            <div
              class="error-text"
              id="err-industry"
              style="display: none"
            ></div>
          </div>
          <div class="footer-text">
            That way the AI is better at analyzing it.
          </div>
          <button class="cta-button">Generate My AI Report →</button>
        </div>

        <!-- Step 6: ANALYSIS (GTMetrix-like Scanning) -->
        <div class="step" id="step6">
          <div class="analysis-wrap">
            <h3 class="analysis-title">Analyzing your URL...</h3>
            <p class="analyzing-url" id="analyzing-url">https://www.yourstore.com</p>
            <div class="gt-browser-window">
              <div class="browser-header">
                <div class="browser-controls">
                  <span class="browser-dot red"></span>
                  <span class="browser-dot yellow"></span>
                  <span class="browser-dot green"></span>
                </div>
                <div class="browser-url-bar">
                  <span id="browser-url">https://www.yourstore.com</span>
                </div>
              </div>
              <div class="browser-content">
                <div class="scan-overlay" id="scanOverlay"></div>
                <div class="mock-content">
                  <div class="mock-image"></div>
                  <div class="mock-text"></div>
                  <div class="mock-text short"></div>
                </div>
              </div>
            </div>
            <div class="analysis-meta">
              <div class="meta-chip">
                Est. time left: <strong id="timeLeft">—</strong>
              </div>
              <div class="meta-chip">Live tasks updating</div>
            </div>
            <p class="analysis-note">This typically takes 10–20 seconds.</p>
            <ul class="analysis-list" id="analysisList"></ul>
            <div id="ariaLive" class="sr-only" aria-live="polite"></div>
          </div>
        </div>

        <!-- Step 7 -->
        <div class="step" id="step7">
          <h2>AI Conversion Report is completed!</h2>
          <p class="description">
            AI has detected <strong>21 improvements</strong> on
            <span id="userDomain">yourstore.com</span>
          </p>
          <div class="screenshot-wrap">
            <h3 class="screenshot-title">Analyzed Page</h3>
            <p class="screenshot-url" id="screenshot-url">https://www.yourstore.com</p>
            <div class="screenshot-browser">
              <div class="browser-header">
                <div class="browser-controls">
                  <span class="browser-dot red"></span>
                  <span class="browser-dot yellow"></span>
                  <span class="browser-dot green"></span>
                </div>
                <div class="browser-url-bar">
                  <span id="screenshot-browser-url">https://www.yourstore.com</span>
                </div>
              </div>
              <div class="screenshot-content">
                <div class="mock-image"></div>
                <div class="mock-text"></div>
                <div class="mock-text short"></div>
              </div>
            </div>
          </div>
          <div class="results-card">
            <h3 style="color: black; margin-bottom: 20px">
              Estimated CRO Results
            </h3>
            <div class="metric-grid">
              <div class="metric-box">
                <div class="metric-value" id="revenuePotential">$151,828</div>
                <div class="metric-label">Revenue Potential / Month</div>
              </div>
              <div class="metric-box">
                <div class="metric-value">+1.82%</div>
                <div class="metric-label">Conversion Rate Uplift</div>
              </div>
              <div class="metric-box">
                <div class="metric-value" id="costInaction">-$629,606</div>
                <div class="metric-label">Cost of Inaction / Month</div>
              </div>
              <div class="metric-box">
                <div class="metric-value">-18,640</div>
                <div class="metric-label">Orders Lost / Month</div>
              </div>
            </div>
          </div>
          <div class="results-card">
            <h3 style="color: black; margin-bottom: 20px">
              Critical Issues Found (Preview)
            </h3>
            <div class="issue-item priority-high">
              🔴 High Priority: Site speed is 68% slower than competitors
            </div>
            <div class="issue-item priority-medium">
              🟡 Medium Priority: 234 product pages have duplicate content
            </div>
            <div class="issue-item priority-low">
              🟢 Quick Win: 89 high-value keywords ranking on page 2
            </div>
          </div>
          <div class="results-card">
            <h3 style="color: var(--brand); margin-bottom: 20px">
              Competitor Gap Analysis
            </h3>
            <div class="competitor-item">
              <span>Competitor #1</span
              ><span style="color: var(--brand)"
                >145,000 monthly organic visitors</span
              >
            </div>
            <div class="competitor-item">
              <span>Competitor #2</span
              ><span style="color: var(--brand)"
                >89,000 monthly organic visitors</span
              >
            </div>
          </div>
          <div class="results-card">
            <h3 style="color: var(--brand); margin-bottom: 20px">
              Performance Scorecards
            </h3>
            <div class="score-grid">
              <div class="score-item">
                <div class="score-value">32/100</div>
                <div class="score-label">
                  Site Performance (Desktop: 32 | Mobile: 28)
                </div>
              </div>
              <div class="score-item">
                <div class="score-value">23</div>
                <div class="score-label">Mobile Usability Issues</div>
              </div>
              <div class="score-item">
                <div class="score-value">45/100</div>
                <div class="score-label">Technical SEO</div>
              </div>
              <div class="score-item">
                <div class="score-value">62/100</div>
                <div class="score-label">UX Score</div>
              </div>
            </div>
          </div>
          <h3 style="color: var(--brand); text-align: center; margin: 30px 0">
            Ready to Capture Your <span id="monthlyOpportunity">$151K</span>/mo
            Opportunity?
          </h3>
          <button class="cta-button">Book Your Free Strategy Call →</button>
        </div>

        <!-- Step 8 -->
        <div class="step" id="step8">
          <div class="booking-section">
            <h2>
              Get your complete audit report + 90-day growth roadmap in a free
              30-minute strategy call
            </h2>
            <div class="value-list">
              <div class="value-item">
                <span class="check-icon">✓</span
                ><span>Full 50+ page audit report (valued at $2,500)</span>
              </div>
              <div class="value-item">
                <span class="check-icon">✓</span
                ><span>Competitor strategy breakdown</span>
              </div>
              <div class="value-item">
                <span class="check-icon">✓</span
                ><span>90-day implementation roadmap</span>
              </div>
              <div class="value-item">
                <span class="check-icon">✓</span
                ><span>Revenue projection model</span>
              </div>
            </div>
            <div class="urgency-badge">
              ⚠️ Limited slots available this week (2 spots left)
            </div>
            <p class="description">
              <strong>Meeting description:</strong> 30-minute meeting to review
              your Conversion Report
            </p>
            <button class="cta-button">Select a Time →</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      let currentStep = 1;
      const totalSteps = 8;
      const steps = document.querySelectorAll(".step");
      const progressSteps = document.querySelectorAll(".progress-step");
      const progressContainer = document.getElementById("progressContainer");

      // Top progress
      const topProgressEl = document.getElementById("topProgress");
      const currentStepText = document.getElementById("currentStepText");
      const totalStepsText = document.getElementById("totalStepsText");
      const progressFillEl = document.getElementById("progressFill");
      const progressPercentEl = document.getElementById("progressPercent");
      if (totalStepsText) totalStepsText.textContent = totalSteps;

      // Analysis state
      const analysis = {
        rafId: null,
        timeouts: [],
        startTime: 0,
        totalDuration: 0,
        running: false,
        countdownId: null,
      };

      function cancelAnalysis() {
        if (analysis.rafId) cancelAnimationFrame(analysis.rafId);
        analysis.timeouts.forEach((t) => clearTimeout(t));
        analysis.timeouts = [];
        if (analysis.countdownId) clearInterval(analysis.countdownId);
        analysis.running = false;
      }

      function showStep(stepNumber) {
        steps.forEach((s) => s.classList.remove("active"));
        const active = document.getElementById(`step${stepNumber}`);
        if (active) active.classList.add("active");

        // Dots between 2–5
        progressContainer.style.display =
          stepNumber >= 2 && stepNumber <= 5 ? "flex" : "none";

        // Update dots
        progressSteps.forEach((p, i) => {
          const idx = i + 2;
          p.classList.remove("active", "completed");
          if (stepNumber > idx) p.classList.add("completed");
          else if (stepNumber === idx) p.classList.add("active");
        });

        // Top progress
        topProgressEl.style.display = "block";
        currentStepText.textContent = Math.min(stepNumber, totalSteps);
        const percent = Math.round(((stepNumber - 1) / (totalSteps - 1)) * 100);
        progressFillEl.style.width = percent + "%";
        progressPercentEl.textContent = percent + "%";
      }

      function nextStep() {
        if (currentStep < totalSteps) {
          currentStep++;
          showStep(currentStep);
        }
      }
      function previousStep() {
        cancelAnalysis();
        if (currentStep > 1) {
          currentStep--;
          showStep(currentStep);
        }
      }

      function selectChallenge(el) {
        document
          .querySelectorAll(".challenge-card")
          .forEach((c) => c.classList.remove("selected"));
        el.classList.add("selected");
      }

      // Validation helpers
      function showFieldError(inputEl, msg) {
        if (!inputEl) return;
        inputEl.classList.add("input-error");
        const err = document.getElementById("err-" + inputEl.id);
        if (err) {
          err.textContent = msg;
          err.style.display = "block";
        }
      }
      function clearFieldError(inputEl) {
        if (!inputEl) return;
        inputEl.classList.remove("input-error");
        const err = document.getElementById("err-" + inputEl.id);
        if (err) {
          err.textContent = "";
          err.style.display = "none";
        }
      }
      document.querySelectorAll("input,select").forEach((el) => {
        el.addEventListener("input", () => clearFieldError(el));
        el.addEventListener("change", () => clearFieldError(el));
      });

      // Auto-prepend https:// to website URL
      const websiteUrlInput = document.getElementById("websiteUrl");
      websiteUrlInput.addEventListener("input", (e) => {
        let value = e.target.value.trim();
        
        // Check if the input is empty or doesn't start with http:// or https://
        if (value && !/^https?:\/\//i.test(value)) {
          // Prevent infinite loop by checking if we're not already processing
          if (!e.target.dataset.isProcessing) {
            e.target.dataset.isProcessing = "true";
            
            // Prepend https:// and preserve the rest of the input
            const cursorPosition = e.target.selectionStart;
            const beforeCursor = value.slice(0, cursorPosition);
            const afterCursor = value.slice(cursorPosition);
            
            // Only prepend if the input doesn't already have a protocol
            e.target.value = "https://" + value;
            
            // Adjust cursor position to account for added "https://"
            const newCursorPosition = cursorPosition + "https://".length;
            e.target.setSelectionRange(newCursorPosition, newCursorPosition);
            
            delete e.target.dataset.isProcessing;
          }
        }
        
        // Ensure validation errors are cleared on input
        clearFieldError(e.target);
      });

      function validateStep(stepId) {
        if (stepId === "step1") return true;
        if (stepId === "step2") {
          const selected = document.querySelector(".challenge-card.selected");
          const err = document.getElementById("challengeError");
          if (!selected) {
            err.style.display = "block";
            return false;
          }
          err.style.display = "none";
          return true;
        }
        if (stepId === "step3") {
          let valid = true;
          const rev = document.getElementById("monthlyRevenue");
          const ad = document.getElementById("monthlyAdSpend");
          const revVal = parseFloat(rev.value);
          const adVal = parseFloat(ad.value);
          if (!(revVal >= 0)) {
            showFieldError(rev, "Please enter a valid monthly revenue (>= 0).");
            valid = false;
          }
          if (!(adVal >= 0)) {
            showFieldError(ad, "Please enter a valid monthly ad spend (>= 0).");
            valid = false;
          }
          return valid;
        }
        if (stepId === "step4") {
          let valid = true;
          const cr = document.getElementById("conversionRate");
          const aov = document.getElementById("aov");
          const sub = document.getElementById("subscriptionRate");
          const crVal = parseFloat(cr.value);
          const aovVal = parseFloat(aov.value);
          const subVal = parseFloat(sub.value);
          if (!(crVal >= 0 && crVal <= 100)) {
            showFieldError(
              cr,
              "Enter a valid conversion rate between 0 and 100."
            );
            valid = false;
          }
          if (!(aovVal > 0)) {
            showFieldError(aov, "Enter a valid AOV (> 0).");
            valid = false;
          }
          if (!(subVal >= 0 && subVal <= 100)) {
            showFieldError(
              sub,
              "Enter a valid subscription rate between 0 and 100."
            );
            valid = false;
          }
          return valid;
        }
        if (stepId === "step5") {
          let valid = true;
          const urlEl = document.getElementById("websiteUrl");
          const pageTypeEl = document.getElementById("pageType");
          const industryEl = document.getElementById("industry");
          let okUrl = true;
          try {
            const u = new URL(urlEl.value);
            if (!/^https?:$/.test(u.protocol)) okUrl = false;
            if (!u.hostname.includes(".")) okUrl = false;
          } catch (e) {
            okUrl = false;
          }
          if (!okUrl) {
            showFieldError(urlEl, "Please enter a valid URL (https://...)");
            valid = false;
          }
          if (!pageTypeEl.value) {
            pageTypeEl.classList.add("input-error");
            const e1 = document.getElementById("err-pageType");
            e1.textContent = "Please select a page type.";
            e1.style.display = "block";
            valid = false;
          }
          if (!industryEl.value) {
            industryEl.classList.add("input-error");
            const e2 = document.getElementById("err-industry");
            e2.textContent = "Please select an industry.";
            e2.style.display = "block";
            valid = false;
          }
          pageTypeEl.addEventListener("change", () => {
            pageTypeEl.classList.remove("input-error");
            document.getElementById("err-pageType").style.display = "none";
          });
          industryEl.addEventListener("change", () => {
            industryEl.classList.remove("input-error");
            document.getElementById("err-industry").style.display = "none";
          });
          return valid;
        }
        return true;
      }

      // Analysis list
      const analysisItems = [
        "Crawling your website structure",
        "Analyzing technical SEO health",
        "Scanning competitor strategies",
        "Finding keyword opportunities",
        "Calculating revenue potential",
        "Generating your custom roadmap",
      ];

      function buildAnalysisList() {
        const list = document.getElementById("analysisList");
        list.innerHTML = "";
        analysisItems.forEach((txt, i) => {
          const li = document.createElement("li");
          li.className = "analysis-item " + (i === 0 ? "active" : "pending");
          li.innerHTML = `<span class="status-icon"></span><span class="analysis-text">${txt}</span>`;
          list.appendChild(li);
        });
      }

      function setAnalysisState(stepIndex) {
        const items = document.querySelectorAll("#analysisList .analysis-item");
        const aria = document.getElementById("ariaLive");
        items.forEach((li, i) => {
          li.classList.remove("pending", "active", "done");
          if (i < stepIndex) li.classList.add("done");
          else if (i === stepIndex) li.classList.add("active");
          else li.classList.add("pending");
        });
        const activeItem = items[stepIndex];
        if (activeItem && aria) {
          aria.textContent =
            "Now: " + activeItem.querySelector(".analysis-text").textContent;
        }
      }

      function startAnalysis() {
        cancelAnalysis();
        currentStep = 6;
        showStep(currentStep);
        buildAnalysisList();

        // Set URL
        const websiteUrl = document.getElementById("websiteUrl")?.value || "https://www.yourstore.com";
        document.getElementById("analyzing-url").textContent = websiteUrl;
        document.getElementById("browser-url").textContent = websiteUrl;

        // Domain for results
        let domain = "yourstore.com";
        try {
          domain = new URL(websiteUrl).hostname;
        } catch (e) {}
        document.getElementById("userDomain").textContent = domain;

        // Set screenshot URL
        document.getElementById("screenshot-url").textContent = websiteUrl;
        document.getElementById("screenshot-browser-url").textContent = websiteUrl;

        const minMs = 10000,
          maxMs = 20000;
        const totalMs = Math.floor(minMs + Math.random() * (maxMs - minMs));
        analysis.running = true;

        const stepsCount = analysisItems.length;
        const weights = Array.from(
          { length: stepsCount },
          () => 0.8 + Math.random() * 1.2
        );
        const wSum = weights.reduce((a, b) => a + b, 0);
        const durations = weights.map((w) => Math.round((w / wSum) * totalMs));
        const sumExceptLast = durations.slice(0, -1).reduce((a, b) => a + b, 0);
        durations[durations.length - 1] = totalMs - sumExceptLast;

        let acc = 0;
        for (let i = 0; i < stepsCount; i++) {
          analysis.timeouts.push(setTimeout(() => setAnalysisState(i), acc));
          acc += durations[i];
        }
        analysis.timeouts.push(
          setTimeout(() => {
            if (!analysis.running) return;
            analysis.running = false;
            currentStep = 7;
            showStep(currentStep);
          }, totalMs + 120)
        );

        // Countdown timer
        const timeLeft = document.getElementById("timeLeft");
        let remainingMs = totalMs;
        timeLeft.textContent = (remainingMs / 1000).toFixed(1) + "s";
        analysis.countdownId = setInterval(() => {
          remainingMs -= 100;
          if (remainingMs <= 0) {
            timeLeft.textContent = "0s";
            clearInterval(analysis.countdownId);
            return;
          }
          timeLeft.textContent =
            (Math.ceil(remainingMs / 100) / 10).toFixed(1).replace(/\.0$/, "") + "s";
        }, 100);
      }

      function showBooking() {
        currentStep = 8;
        showStep(currentStep);
      }

      // CTA behavior + validation
      document.querySelectorAll(".cta-button").forEach((btn) => {
        btn.addEventListener("click", (e) => {
          e.preventDefault();
          const stepId = btn.closest(".step").id;
          if (!validateStep(stepId)) return;
          let cb = null;
          if (
            stepId === "step1" ||
            stepId === "step2" ||
            stepId === "step3" ||
            stepId === "step4"
          ) {
            cb = nextStep;
          } else if (stepId === "step5") {
            cb = startAnalysis;
          } else if (stepId === "step7") {
            cb = showBooking;
          } else if (stepId === "step8") {
            cb = () => alert("Integrate Calendly widget here");
          }
          if (cb) cb();
        });
      });

      // Back buttons
      function createBackButtons() {
        steps.forEach((step) => {
          if (step.id !== "step1" && !['step6', 'step7', 'step8'].includes(step.id) && !step.querySelector(".back-button")) {
            const backBtn = document.createElement("button");
            backBtn.className = "back-button";
            backBtn.type = "button";
            backBtn.innerHTML = "← Back";
            step.insertBefore(backBtn, step.firstElementChild);
            backBtn.addEventListener("click", (e) => {
              e.preventDefault();
              previousStep();
            });
          }
        });
      }
      createBackButtons();

      // Slider filler
      const sliderContent = [
        { title: "Slides Of What Is Inside Of An AI Report", desc: "" },
        { title: "Slides Of What Is Inside Of An AI Report", desc: "" },
        { title: "Slides Of What Is Inside Of An AI Report", desc: "" },
        { title: "Slides Of What Is Inside Of An AI Report", desc: "" },
      ];
      let currentSlideIdx = 0;
      const slideContainer = document.getElementById("slideContent");
      function updateSlider() {
        slideContainer.innerHTML = `<div class="slide-title">${sliderContent[currentSlideIdx].title}</div><div class="slide-desc">${sliderContent[currentSlideIdx].desc}</div>`;
        currentSlideIdx = (currentSlideIdx + 1) % sliderContent.length;
      }
      updateSlider();
      setInterval(updateSlider, 4000);
    </script>
  </body>
</html>
